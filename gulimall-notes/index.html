<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>gulimall-notes.md | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="[TOC] 1.openfeign远程服务调用 引入open-feign依赖 编写一个接口，告诉SpringCloud这个接口需要调用远程服务，例如如下的&#x2F;member&#x2F;list接口1234567891011121314@RestController@RequestMapping(&quot;coupon&#x2F;coupon&quot;)public class CouponController &amp;#1">
<meta property="og:type" content="website">
<meta property="og:title" content="gulimall-notes.md">
<meta property="og:url" content="https://chaobk.github.io/gulimall-notes/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="[TOC] 1.openfeign远程服务调用 引入open-feign依赖 编写一个接口，告诉SpringCloud这个接口需要调用远程服务，例如如下的&#x2F;member&#x2F;list接口1234567891011121314@RestController@RequestMapping(&quot;coupon&#x2F;coupon&quot;)public class CouponController &amp;#1">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://chaobk.github.io/assets/2023-03-21-22-00-59.png">
<meta property="article:published_time" content="2023-03-19T12:56:41.000Z">
<meta property="article:modified_time" content="2023-03-22T14:34:45.383Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://chaobk.github.io/assets/2023-03-21-22-00-59.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://chaobk.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="page-" class="h-entry article article-type-page" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/gulimall-notes/index.html" class="article-date">
  <time class="dt-published" datetime="2023-03-19T12:56:41.000Z" itemprop="datePublished">2023-03-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      gulimall-notes.md
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h2 id="1-openfeign远程服务调用"><a href="#1-openfeign远程服务调用" class="headerlink" title="1.openfeign远程服务调用"></a>1.openfeign远程服务调用</h2><ul>
<li>引入<code>open-feign</code>依赖</li>
<li>编写一个接口，告诉<code>SpringCloud</code>这个接口需要调用远程服务，例如如下的<code>/member/list</code>接口<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;coupon/coupon&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CouponController</span> &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/member/list&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">membercoupons</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">CouponEntity</span> <span class="variable">couponEntity</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CouponEntity</span>();</span><br><span class="line">        couponEntity.setCouponName(<span class="string">&quot;满100减10&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> R.ok().put(<span class="string">&quot;coupons&quot;</span>, Arrays.asList(couponEntity));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>声明接口的每一个方法都是调用哪个远程服务的哪个请求<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(&quot;gulimall-coupon&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CouponFeignService</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/coupon/coupon/member/list&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">membercoupons</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>开启远程调用功能，即<code>EnableFeignClients</code>注解<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients(basePackages = &quot;com.atguigu.gulimall.member.feign&quot;)</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GulimallMemberApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(GulimallMemberApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2-配置中心"><a href="#2-配置中心" class="headerlink" title="2.配置中心"></a>2.配置中心</h2><p>可以在<code>github</code>中搜索<code>spring-cloud-alibaba</code>查看对应<code>demo</code>，例如以下取自：<a target="_blank" rel="noopener" href="https://github.com/alibaba/spring-cloud-alibaba/blob/2022.x/spring-cloud-alibaba-examples/nacos-example/nacos-config-example/readme.md">nacos注册中心步骤</a></p>
<h3 id="2-1-引入依赖"><a href="#2-1-引入依赖" class="headerlink" title="2.1 引入依赖"></a>2.1 引入依赖</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 配置中心来做配置管理 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-创建一个-bootstrap-properties-（老版本）"><a href="#2-2-创建一个-bootstrap-properties-（老版本）" class="headerlink" title="2.2 创建一个 bootstrap.properties （老版本）"></a>2.2 创建一个 bootstrap.properties （老版本）</h3><p>并添加注册中心以及服务名配置</p>
<h3 id="2-3-需要给配置中心默认添加一个叫数据集（Data-Id）-gulimall-coupon-properties。默认规则，应用名-properties"><a href="#2-3-需要给配置中心默认添加一个叫数据集（Data-Id）-gulimall-coupon-properties。默认规则，应用名-properties" class="headerlink" title="2.3 需要给配置中心默认添加一个叫数据集（Data Id） gulimall-coupon.properties。默认规则，应用名.properties"></a>2.3 需要给配置中心默认添加一个叫数据集（Data Id） gulimall-coupon.properties。默认规则，应用名.properties</h3><h3 id="2-4-给应用名-properties添加任何配置"><a href="#2-4-给应用名-properties添加任何配置" class="headerlink" title="2.4 给应用名.properties添加任何配置"></a>2.4 给应用名.properties添加任何配置</h3><h3 id="2-5-动态获取配置"><a href="#2-5-动态获取配置" class="headerlink" title="2.5 动态获取配置"></a>2.5 动态获取配置</h3><p>@RefreseScope 动态获取并刷新配置<br>@Value 配置路径<br>如果配置中心和当前应用的配置文件中都配置了相同的项，优先使用配置中心的配置</p>
<h2 id="3-配置中心部分说明"><a href="#3-配置中心部分说明" class="headerlink" title="3.配置中心部分说明"></a>3.配置中心部分说明</h2><h3 id="3-1-命名空间"><a href="#3-1-命名空间" class="headerlink" title="3.1 命名空间"></a>3.1 命名空间</h3><p>配置隔离。<br>默认： public（保留空间）；默认新增的所有配置都在public空间<br>例如：</p>
<ul>
<li>开发、测试、生产：利用环境空间来做环境隔离<ul>
<li>需要在bootstrap.properties进行配置</li>
</ul>
</li>
</ul>
<p>代码中如果不进行配置的话，默认取自保留空间，配置的话，参考如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.cloud.nacos.config.namespace=7da39a77-7a1c-4e5b-<span class="number">8835</span>-6e86e5a1e476</span><br></pre></td></tr></table></figure>
<p>namespace值来源于<code>nacos</code>：<br><img src="/assets/2023-03-21-22-00-59.png"></p>
<ul>
<li>每一个微服务之间互相隔离配置，每一个微服务都创建自己的命名空间，只加载自己命名空间下的所有配置</li>
</ul>
<h3 id="3-2-配置集"><a href="#3-2-配置集" class="headerlink" title="3.2 配置集"></a>3.2 配置集</h3><p>所有配置的集合</p>
<h3 id="3-3-配置集ID"><a href="#3-3-配置集ID" class="headerlink" title="3.3 配置集ID"></a>3.3 配置集ID</h3><p>类似文件名 - DataID</p>
<h3 id="3-4-配置分组"><a href="#3-4-配置分组" class="headerlink" title="3.4 配置分组"></a>3.4 配置分组</h3><p>默认所有的配置集都属于：DEFAULT_GROUP<br>使用的时候，要在配置文件指定</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.cloud.nacos.config.group=xxx</span><br></pre></td></tr></table></figure>

<h2 id="4-同时加载多个配置集"><a href="#4-同时加载多个配置集" class="headerlink" title="4.同时加载多个配置集"></a>4.同时加载多个配置集</h2><h3 id="4-1-微服务任何配置信息，任何配置文件都可以放在配置中心中"><a href="#4-1-微服务任何配置信息，任何配置文件都可以放在配置中心中" class="headerlink" title="4.1 微服务任何配置信息，任何配置文件都可以放在配置中心中"></a>4.1 微服务任何配置信息，任何配置文件都可以放在配置中心中</h3><h3 id="4-2-只需要在-bootstrap-properties-说明加载配置中心中哪些配置文件即可"><a href="#4-2-只需要在-bootstrap-properties-说明加载配置中心中哪些配置文件即可" class="headerlink" title="4.2 只需要在 bootstrap.properties 说明加载配置中心中哪些配置文件即可"></a>4.2 只需要在 bootstrap.properties 说明加载配置中心中哪些配置文件即可</h3><h3 id="4-3-Value-ConfigurationProperties"><a href="#4-3-Value-ConfigurationProperties" class="headerlink" title="4.3 @Value @ConfigurationProperties"></a>4.3 @Value @ConfigurationProperties</h3><p>以前在<code>SpringBoot</code>任何方法从配置文件中获取值，都能使用<br>配置中心有的优先使用配置中心的</p>
<h2 id="5-前端开发基础知识"><a href="#5-前端开发基础知识" class="headerlink" title="5.前端开发基础知识"></a>5.前端开发基础知识</h2><p><a href="./../%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">笔记链接</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://chaobk.github.io/gulimall-notes/index.html" data-id="clfl8hkfx000268u49lhm843r" data-title="gulimall-notes.md" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/03/12/hello-world/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>